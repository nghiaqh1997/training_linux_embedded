<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1546568809328" ID="ID_590599161" MODIFIED="1546569050471" TEXT="shared memory">
<node CREATED="1546569177270" ID="ID_1847817135" MODIFIED="1546569179766" POSITION="right" TEXT="agenda"/>
<node CREATED="1546569761825" ID="ID_547029171" MODIFIED="1546569775621" POSITION="right" TEXT="memory page structure"/>
<node CREATED="1546569817049" ID="ID_757036750" MODIFIED="1546569958375" POSITION="right" TEXT="Library support">
<node CREATED="1546570013850" ID="ID_190483395" MODIFIED="1546570223342" TEXT="shm API"/>
<node CREATED="1546570223937" ID="ID_967811084" MODIFIED="1546570225661" TEXT="mmap"/>
</node>
<node CREATED="1546570418170" ID="ID_1915306662" MODIFIED="1546570423807" POSITION="right" TEXT="shm API"/>
<node CREATED="1546571028384" ID="ID_216014115" MODIFIED="1546571069401" POSITION="right" TEXT="Sequence diagram to share memory via shm API"/>
<node CREATED="1546571082213" ID="ID_1284850011" MODIFIED="1546571387694" POSITION="right" TEXT="generate a unique key from string">
<node CREATED="1546570832204" ID="ID_1277247113" MODIFIED="1546570833746" TEXT="#include &lt;sys/types.h&gt;"/>
<node CREATED="1546570840709" ID="ID_294337961" MODIFIED="1546570841369" TEXT="#include &lt;sys/ipc.h&gt;"/>
<node CREATED="1546570847254" ID="ID_463582529" MODIFIED="1546570848075" TEXT="key_t ftok(const char *pathname, int proj_id);">
<node CREATED="1546570863479" ID="ID_1446510473" MODIFIED="1546570866525" TEXT="convert a pathname and a project identifier to a key"/>
</node>
</node>
<node CREATED="1546571338154" ID="ID_1557394980" MODIFIED="1546571400997" POSITION="right" TEXT="Alloc memory from key">
<node CREATED="1546571414505" ID="ID_1071391690" MODIFIED="1546571415502" TEXT="int shmget(key_t key, size_t size, int shmflg);">
<node CREATED="1546571461297" ID="ID_1794308488" MODIFIED="1546571483518" TEXT="Allocate and return memory address for share memory"/>
</node>
<node CREATED="1546571516647" ID="ID_1354685507" MODIFIED="1546571517302" TEXT="IPC_CREAT"/>
<node CREATED="1546572618289" ID="ID_1932785813" MODIFIED="1546572618886" TEXT="PROT_READ | PROT_WRITE"/>
<node CREATED="1546571691882" ID="ID_92657878" MODIFIED="1546571701901" TEXT="Permission like a file"/>
</node>
<node CREATED="1546571725200" ID="ID_1354074859" MODIFIED="1546571745765" POSITION="right" TEXT="Map shared memory to process address space">
<node CREATED="1546571779329" ID="ID_505038124" MODIFIED="1546571780038" TEXT="void *shmat(int shmid, const void *shmaddr, int shmflg);"/>
<node CREATED="1546571919455" ID="ID_557473702" MODIFIED="1546571931275" TEXT="shmaddr should be NULL"/>
<node CREATED="1546571954210" ID="ID_1278383028" MODIFIED="1546571954749" TEXT="SHM_RDONLY"/>
</node>
<node CREATED="1546571996801" ID="ID_260967970" MODIFIED="1546572031526" POSITION="right" TEXT="Unmap shared memory in process address space">
<node CREATED="1546572062073" ID="ID_1805025624" MODIFIED="1546572062965" TEXT="int shmdt(const void *shmaddr);"/>
</node>
<node CREATED="1546572270177" ID="ID_559969713" MODIFIED="1546572277685" POSITION="right" TEXT="Destroy shared memory">
<node CREATED="1546572296961" ID="ID_1893250722" MODIFIED="1546572297525" TEXT="int shmctl(int shmid, int cmd, struct shmid_ds *buf);"/>
<node CREATED="1546572328223" ID="ID_1656168425" MODIFIED="1546572336413" TEXT="IPC_RMID"/>
</node>
<node CREATED="1546572081925" ID="ID_1401313608" MODIFIED="1546572086181" POSITION="right" TEXT="Example code"/>
<node CREATED="1546573972417" ID="ID_1566975183" MODIFIED="1546573992901" POSITION="right" TEXT="Practice with shm API"/>
<node CREATED="1546572233601" ID="ID_1301620612" MODIFIED="1546572238990" POSITION="right" TEXT="mmap API"/>
<node CREATED="1546572385289" ID="ID_1384228015" MODIFIED="1546572392389" POSITION="right" TEXT="Sequence diagram to share memory via mmap API"/>
<node CREATED="1546573766369" ID="ID_1489261037" MODIFIED="1546573786070" POSITION="right" TEXT="function API">
<node CREATED="1546573825760" ID="ID_287539755" MODIFIED="1546573826438" TEXT="#include &lt;sys/mman.h&gt;"/>
<node CREATED="1546573787089" ID="ID_351640317" MODIFIED="1546573806788" TEXT="void *mmap(void *addr, size_t length, int prot, int flags, int fd, off_t offset);"/>
<node CREATED="1546573808105" ID="ID_992159029" MODIFIED="1546573808974" TEXT=" int munmap(void *addr, size_t length);"/>
<node CREATED="1546573869489" ID="ID_1793429307" MODIFIED="1546573869982" TEXT="shm_open(name, O_CREAT | O_RDRW, 0666); "/>
<node CREATED="1546573878777" ID="ID_621539855" MODIFIED="1546573879301" TEXT="ftruncate(shm_fd, SIZE); "/>
</node>
<node CREATED="1546573884161" ID="ID_525084506" MODIFIED="1546573896117" POSITION="right" TEXT="Example code"/>
<node CREATED="1546573922049" ID="ID_637434641" MODIFIED="1546573950574" POSITION="right" TEXT="Compare shm and mmap API"/>
<node CREATED="1546573996304" ID="ID_1611302952" MODIFIED="1546574008637" POSITION="right" TEXT="Practice with mmap API"/>
<node CREATED="1546574022617" ID="ID_70173825" MODIFIED="1546574034685" POSITION="right" TEXT="Home work"/>
</node>
</map>
